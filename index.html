<!DOCTYPE html>
<html>
<head>
    <style>
        html, body {
            margin: 0;
            padding: 0;
        }
        canvas {
            position: fixed;
        }
        #toggleEdgeScrollingEnabled {
            position: fixed;
            top: 5px;
            left: 5px;
        }
        #togglePosLabelsEnabled {
            position: fixed;
            top: 30px;
            left: 5px;
        }
    </style>
    <script>
        var baseTileWidth = 504,
            baseTileHeight = 253,
            zoomFactor = 0.5, // TODO: Set zoom factor to 1.
            tileWidth = baseTileWidth * zoomFactor,
            tileHeight = baseTileHeight * zoomFactor,
            rotation = 0,
            cameraX = 0,
            cameraY = 0,
            moveCameraStartX = -1,
            moveCameraStartY = -1,
            moveCamera = false,
            edgeScrollingEnabled = false,
            posLabelsEnabled = false,
            groundLayerCanvas,
            objectLayerCanvas,
            uiLayerCanvas;

        function absCameraX() {
            var retX = cameraX * zoomFactor;
            return rotation == 0 || rotation == 3
                ? retX
                : -retX;
        }

        function absCameraY() {
            var retY = cameraY * zoomFactor;
            return rotation == 0 || rotation == 1
                ? retY
                : -retY;
        }

        function TileDefinition (src, srcX, srcY, srcWidth, srcHeight, tw, th, yOffsetDir, isAnimated) {
            this.source = src;
            this.tileWidth = tw;
            this.tileHeight = th;
            this.sourceX = srcX;
            this.sourceY = srcY;
            this.sourceWidth = srcWidth;
            this.sourceHeight = srcHeight;
			this.yOffsetDirection = yOffsetDir || 0;
            this.isAnimated = isAnimated || false;
            this.current = this;
        };

        var tiles = new Image();
            tiles.src = "tiles.png";

        var blocks = new Image();
            blocks.src = "blocks.png";

        var tileDefinitions = {
            default: new TileDefinition(tiles, 0, 0, 504, 263, 504, 253), 
            ground: new TileDefinition(tiles, 504, 0, 504, 263, 504, 253),
            water: new TileDefinition(tiles, 1008, 0, 504, 263, 504, 253, 0, true),
            lava: new TileDefinition(tiles, 1512, 0, 504, 263, 504, 253),
            block: new TileDefinition(blocks, 0, 0, 504, 506, 504, 253),
            rampNorth: [new TileDefinition(blocks, 504, 0, 504, 506, 504, 253), new TileDefinition(blocks, 504, 506, 504, 506, 504, 253), new TileDefinition(blocks, 504, 1012, 504, 506, 504, 253), new TileDefinition(blocks, 504, 1518, 504, 506, 504, 253)],
            rampEast: [new TileDefinition(blocks, 504, 506, 504, 506, 504, 253), new TileDefinition(blocks, 504, 1012, 504, 506, 504, 253), new TileDefinition(blocks, 504, 1518, 504, 506, 504, 253), new TileDefinition(blocks, 504, 0, 504, 506, 504, 253)],
            rampSouth: [new TileDefinition(blocks, 504, 1012, 504, 506, 504, 253), new TileDefinition(blocks, 504, 1518, 504, 506, 504, 253), new TileDefinition(blocks, 504, 0, 504, 506, 504, 253), new TileDefinition(blocks, 504, 506, 504, 506, 504, 253)],
            rampWest: [new TileDefinition(blocks, 504, 1518, 504, 506, 504, 253), new TileDefinition(blocks, 504, 0, 504, 506, 504, 253), new TileDefinition(blocks, 504, 506, 504, 506, 504, 253), new TileDefinition(blocks, 504, 1012, 504, 506, 504, 253)],
            rampCornerNorthEastInset: [new TileDefinition(blocks, 1008, 0, 504, 506, 504, 253), new TileDefinition(blocks, 1008, 506, 504, 506, 504, 253), new TileDefinition(blocks, 1008, 1012, 504, 506, 504, 253), new TileDefinition(blocks, 1008, 1518, 504, 506, 504, 253)],
            rampCornerEastSouthInset: [new TileDefinition(blocks, 1008, 506, 504, 506, 504, 253), new TileDefinition(blocks, 1008, 1012, 504, 506, 504, 253), new TileDefinition(blocks, 1008, 1518, 504, 506, 504, 253), new TileDefinition(blocks, 1008, 0, 504, 506, 504, 253)],
            rampCornerSouthWestInset: [new TileDefinition(blocks, 1008, 1012, 504, 506, 504, 253), new TileDefinition(blocks, 1008, 1518, 504, 506, 504, 253), new TileDefinition(blocks, 1008, 0, 504, 506, 504, 253), new TileDefinition(blocks, 1008, 506, 504, 506, 504, 253)],
            rampCornerWestNorthInset: [new TileDefinition(blocks, 1008, 1518, 504, 506, 504, 253), new TileDefinition(blocks, 1008, 0, 504, 506, 504, 253), new TileDefinition(blocks, 1008, 506, 504, 506, 504, 253), new TileDefinition(blocks, 1008, 1012, 504, 506, 504, 253)],
            rampCornerEastNorthOutset: [new TileDefinition(blocks, 1512, 0, 504, 506, 504, 253), new TileDefinition(blocks, 1512, 506, 504, 506, 504, 253), new TileDefinition(blocks, 1512, 1012, 504, 506, 504, 253), new TileDefinition(blocks, 1512, 1516, 504, 506, 504, 253)],
            rampCornerSouthEastOutset: [new TileDefinition(blocks, 1512, 506, 504, 506, 504, 253), new TileDefinition(blocks, 1512, 1012, 504, 506, 504, 253), new TileDefinition(blocks, 1512, 1516, 504, 506, 504, 253), new TileDefinition(blocks, 1512, 0, 504, 506, 504, 253)],
            rampCornerWestSouthOutset: [new TileDefinition(blocks, 1512, 1012, 504, 506, 504, 253), new TileDefinition(blocks, 1512, 1516, 504, 506, 504, 253), new TileDefinition(blocks, 1512, 0, 504, 506, 504, 253), new TileDefinition(blocks, 1512, 506, 504, 506, 504, 253)],
            rampCornerNorthWestOutset: [new TileDefinition(blocks, 1512, 1516, 504, 506, 504, 253), new TileDefinition(blocks, 1512, 0, 504, 506, 504, 253), new TileDefinition(blocks, 1512, 506, 504, 506, 504, 253), new TileDefinition(blocks, 1512, 1012, 504, 506, 504, 253)],
            test: new TileDefinition(blocks, 0, 1518, 504, 506, 504, 253),
        };

        var groundLayer = [
            [null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null],
            [null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null],
            [null, null, tileDefinitions.ground, tileDefinitions.ground, tileDefinitions.ground, tileDefinitions.ground, tileDefinitions.ground, tileDefinitions.ground, tileDefinitions.ground, tileDefinitions.ground, tileDefinitions.ground, null, null, null, null, null, null],
            [null, null, tileDefinitions.water, tileDefinitions.water, tileDefinitions.water, tileDefinitions.water, tileDefinitions.water, tileDefinitions.water, tileDefinitions.water, tileDefinitions.water, tileDefinitions.ground, tileDefinitions.ground, tileDefinitions.ground, tileDefinitions.ground, null, null, null],
            [null, null, tileDefinitions.ground, tileDefinitions.ground, tileDefinitions.ground, tileDefinitions.ground, tileDefinitions.ground, tileDefinitions.ground, tileDefinitions.ground, tileDefinitions.ground, tileDefinitions.ground, tileDefinitions.ground, tileDefinitions.ground, tileDefinitions.ground, tileDefinitions.ground, null, null],
            [null, null, tileDefinitions.water, tileDefinitions.water, tileDefinitions.water, tileDefinitions.water, tileDefinitions.water, tileDefinitions.water, tileDefinitions.water, tileDefinitions.water, tileDefinitions.ground, tileDefinitions.ground, tileDefinitions.ground, tileDefinitions.ground, null, null, null],
            [null, null, tileDefinitions.ground, tileDefinitions.ground, tileDefinitions.ground, tileDefinitions.ground, tileDefinitions.ground, tileDefinitions.ground, tileDefinitions.ground, tileDefinitions.ground, tileDefinitions.ground, null, null, null, null, null, null],
            [null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null],
            [null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null],
        ];

        var objectLayer = [
            [tileDefinitions.block, tileDefinitions.block, tileDefinitions.block, tileDefinitions.block, tileDefinitions.block, tileDefinitions.block, tileDefinitions.block, tileDefinitions.block, tileDefinitions.block, tileDefinitions.block, tileDefinitions.block, tileDefinitions.block, tileDefinitions.block, null, null, null, null],
            [tileDefinitions.block, tileDefinitions.rampCornerWestNorthInset, tileDefinitions.rampNorth, tileDefinitions.rampNorth, tileDefinitions.rampNorth, tileDefinitions.rampNorth, tileDefinitions.rampNorth, tileDefinitions.rampNorth, tileDefinitions.rampNorth, tileDefinitions.rampNorth, tileDefinitions.rampNorth, tileDefinitions.rampCornerNorthEastInset, tileDefinitions.block, tileDefinitions.block, tileDefinitions.block, tileDefinitions.block, null],
            [tileDefinitions.block, tileDefinitions.rampWest, null, null, null, null, null, null, null, null, null, tileDefinitions.rampCornerEastNorthOutset, tileDefinitions.rampNorth, tileDefinitions.rampNorth, tileDefinitions.rampCornerNorthEastInset, tileDefinitions.block, tileDefinitions.block],
            [tileDefinitions.block, tileDefinitions.rampWest, null, null, null, null, null, null, null, null, null, null, null, null, tileDefinitions.rampCornerEastNorthOutset, tileDefinitions.rampCornerNorthEastInset, tileDefinitions.block],
            [tileDefinitions.block, tileDefinitions.rampWest, null, null, null, null, null, null, null, null, null, null, null, null, null, tileDefinitions.rampEast, tileDefinitions.block],
            [tileDefinitions.block, tileDefinitions.rampWest, null, null, null, null, null, null, null, null, null, null, null, null, tileDefinitions.rampCornerSouthEastOutset, tileDefinitions.rampCornerEastSouthInset, tileDefinitions.block],
            [tileDefinitions.block, tileDefinitions.rampWest, null, null, null, null, null, null, null, null, null, tileDefinitions.rampCornerSouthEastOutset, tileDefinitions.rampSouth, tileDefinitions.rampSouth, tileDefinitions.rampCornerEastSouthInset, tileDefinitions.block, tileDefinitions.block],
            [tileDefinitions.block, tileDefinitions.rampCornerSouthWestInset, tileDefinitions.rampSouth, tileDefinitions.rampSouth, tileDefinitions.rampSouth, tileDefinitions.rampSouth, tileDefinitions.rampSouth, tileDefinitions.rampSouth, tileDefinitions.rampSouth, tileDefinitions.rampSouth, tileDefinitions.rampSouth, tileDefinitions.rampCornerEastSouthInset, tileDefinitions.block, tileDefinitions.block, tileDefinitions.block, tileDefinitions.block, null],
            [tileDefinitions.block, tileDefinitions.block, tileDefinitions.block, tileDefinitions.block, tileDefinitions.block, tileDefinitions.block, tileDefinitions.block, tileDefinitions.block, tileDefinitions.block, tileDefinitions.block, tileDefinitions.block, tileDefinitions.block, tileDefinitions.block, null, null, null, null],
        ];

        var mapWidth = groundLayer[0].length;
        var mapHeight = groundLayer.length;

        window.addEventListener("load", function() {
            groundLayerCanvas = document.getElementById("groundLayerCanvas");
            groundLayerCanvas.width = window.innerWidth;
            groundLayerCanvas.height = window.innerHeight;

            objectLayerCanvas = document.getElementById("objectLayerCanvas");
            objectLayerCanvas.width = window.innerWidth;
            objectLayerCanvas.height = window.innerHeight;

            uiLayerCanvas = document.getElementById("uiLayerCanvas");
            uiLayerCanvas.width = window.innerWidth;
            uiLayerCanvas.height = window.innerHeight;

            window.addEventListener("resize", function() {
                groundLayerCanvas.width = window.innerWidth;
                groundLayerCanvas.height = window.innerHeight;
                objectLayerCanvas.width = window.innerWidth;
                objectLayerCanvas.height = window.innerHeight;
                uiLayerCanvas.width = window.innerWidth;
                uiLayerCanvas.height = window.innerHeight;
            });

            document.getElementById("toggleEdgeScrollingEnabled").addEventListener("click", function() {
                edgeScrollingEnabled = !edgeScrollingEnabled;
                if (edgeDetected) {
                    moveCameraByEdge();
                }
            }); 

            document.getElementById("togglePosLabelsEnabled").addEventListener("click", function() {
                posLabelsEnabled = !posLabelsEnabled;
            });

            window.addEventListener("keydown", function(e) {
                if (e.keyCode === 82) {
                    var currentCameraPosition = translateTile(cameraX, cameraY);
                    var currentRotation = rotation;
                    rotation++;
                    
                    if (rotation === 4) {
                        rotation = 0;
                    }

                    // TODO: Calculate new camera position correctly.
                    if ((currentRotation === 0 && rotation === 1) || (currentRotation === 2 && rotation === 3)) {
                        cameraX *= 2;
                        cameraY /= 2;
                    } else if ((currentRotation === 1 && rotation === 2) || (currentRotation === 3 && rotation === 0)) {
                        cameraX /= 2;
                        cameraY *= 2;
                    }
                }
            });

            window.addEventListener("wheel", function(e) {
                if (e.deltaY < 0) {
                    zoomFactor *= 2;
                    
                    if (zoomFactor >= 4) {
                        zoomFactor = 4;
                    }
                } else {
                    zoomFactor /= 2;

                    if (zoomFactor <= 0.25) {
                        zoomFactor = 0.25;
                    }
                }
                
                // TODO: Zoom to middle of screen.
                tileWidth = baseTileWidth * zoomFactor;
                tileHeight = baseTileHeight * zoomFactor;
            });

            window.addEventListener("mousedown", function(e) {
                if (e.which === 3) {
                    moveCamera = true;

                    moveCameraStartX = rotation === 1 || rotation === 2
                        ? e.clientX + cameraX
                        : e.clientX - cameraX;

                    moveCameraStartY = rotation === 2 || rotation === 3
                        ? e.clientY + cameraY
                        : e.clientY - cameraY;

                    e.preventDefault();
                    return false;
                }
            });

            var edgeDetected = false;
            var edgeSpeed = 5;
            var edgeDirectionX = 0;
            var edgeDirectionY = 0;
            window.addEventListener("mousemove", function(e) {
                if (moveCamera) {
                    cameraX = rotation === 1 || rotation === 2
                        ? -(e.clientX - moveCameraStartX)
                        : e.clientX - moveCameraStartX;

                    cameraY = rotation === 2 || rotation === 3
                        ? -(e.clientY - moveCameraStartY)
                        : e.clientY - moveCameraStartY;
                } else {
                    var leftEdge = e.clientX < 10;
                    var rightEdge = e.clientX > groundLayerCanvas.width - 10;
                    var topEdge = e.clientY < 10;
                    var bottomEdge = e.clientY > groundLayerCanvas.height - 10;

                    if (leftEdge || rightEdge || topEdge || bottomEdge) {
                        edgeDirectionX = leftEdge ? edgeSpeed : (rightEdge ? -edgeSpeed : 0);
                        edgeDirectionY = topEdge ? (edgeSpeed / 2) : (bottomEdge ? -(edgeSpeed / 2) : 0);

                        if (!edgeDetected) {
                            edgeDetected = true;
                            moveCameraByEdge();
                        }
                    } else {
                        edgeDetected = false;
                    }
                }
            });

            function moveCameraByEdge() {
                if (!edgeDetected || !edgeScrollingEnabled) {
                    return;
                }

                cameraX += edgeDirectionX * zoomFactor;
                cameraY += edgeDirectionY * zoomFactor;
                setTimeout(function() {
                    moveCameraByEdge(); },
                    20);
            }

            window.addEventListener("mouseup", function(e) {
                if (e.which === 3) {
                    moveCamera = false;
                    moveCameraStartX = -1;
                    moveCameraStartY = -1;
                    e.preventDefault();
                    return false;
                }
            });

            window.addEventListener("contextmenu", function(e) {
                e.preventDefault();
                return false;
            });

            var ticks = 0;
            var waterAnimationIndex = 0;
            setInterval(function() {
                ticks++;
                if (ticks  >= 50) {
                    ticks = 0;
                    waterAnimationIndex++;
                    if (waterAnimationIndex >= 4) {
                        waterAnimationIndex = 0;
                    }
                    tileDefinitions.water.current = new TileDefinition(tiles, 1008, waterAnimationIndex * 263, 504, 263, 504, 253);
                }

                requestAnimationFrame(draw);
            }, 10);
        });

        function translateXY(x, y) {
            var offsetX = absCameraX() + (window.innerWidth / 2),
                offsetY = absCameraY() + (window.innerHeight / 2),
                absX = x,
                absY = y,
                translated = { x: 0, y: 0 },
                translatedXX = ((tileWidth - (zoomFactor * 2)) / 2) * x,
                translatedXY = ((tileWidth - zoomFactor) / 2) * y,
                translatedYX = ((tileHeight - zoomFactor) / 2) * x,
                translatedYY = ((tileHeight - (zoomFactor * 2)) / 2) * y;

            switch (rotation) {
                case 0:
                    translated = {
                        x: translatedXX - translatedXY,
                        y: translatedYY + translatedYX
                    };
                    break;

                case 1:
                    translated = {
                        x: -(translatedXY + translatedXX),
                        y: translatedYX - translatedYY
                    };
                    break;

                case 2:
                    translated = {
                        x: -(translatedXX - translatedXY),
                        y: -(translatedYX + translatedYY)
                    };
                    break;

                case 3:
                    translated = {
                        x: translatedXY + translatedXX,
                        y: translatedYY - translatedYX
                    };
                    break;
            }

            return {
                x: offsetX + translated.x,
                y: offsetY + translated.y
            };
        }

        function translateTile(absX, absY) {
            translatedXX = absX / ((tileWidth - (zoomFactor * 2)) / 2);
            translatedXY = absY / ((tileWidth - zoomFactor) / 2);
            translatedYX = absX / ((tileHeight - zoomFactor) / 2);
            translatedYY = absY / ((tileHeight - (zoomFactor * 2)) / 2);

            console.log("x:", translatedXX + translatedXY);
            console.log("y:", translatedYY - translatedYX);

            // TODO: Calculate tile position.
            return {
                x: 0,
                y: 0
            }
        }

        function draw() {
            var groundLayerContext = groundLayerCanvas.getContext("2d");
            groundLayerContext.clearRect(0, 0, groundLayerCanvas.width, groundLayerCanvas.height);

            groundLayerContext.fillStyle = "black";
            groundLayerContext.fillRect(0, 0, groundLayerCanvas.width, groundLayerCanvas.height);

            var objectLayerContext = objectLayerCanvas.getContext("2d");
            objectLayerContext.clearRect(0, 0, objectLayerCanvas.width, objectLayerCanvas.height);

            var uiLayerContext = uiLayerCanvas.getContext("2d");
            uiLayerContext.clearRect(0, 0, uiLayerCanvas.width, uiLayerCanvas.height);
            uiLayerContext.font = "12px Lucida Console";

            switch (rotation) {
                case 0:
                    for (var y = 0; y < mapHeight; y++) {
                        for (var x = 0; x < mapWidth; x++) {
                            if (!render(groundLayerContext, objectLayerContext, uiLayerContext, x, y)) {
                                continue;
                            }
                        }
                    }
                    break;

                case 1:
                    for (var y = mapHeight; y >= 0; y--) {
                        for (var x = 0; x < mapWidth; x++) {
                            if (!render(groundLayerContext, objectLayerContext, uiLayerContext, x, y)) {
                                continue;
                            }
                        }
                    }
                    break;
                    
                case 2:
                    for (var y = mapHeight; y >= 0; y--) {
                        for (var x = mapWidth; x >= 0; x--) {
                            if (!render(groundLayerContext, objectLayerContext, uiLayerContext, x, y)) {
                                continue;
                            }
                        }
                    }
                    break;
                case 3:
                    for (var y = 0; y < mapHeight; y++) {
                        for (var x = mapWidth; x >= 0; x--) {
                            if (!render(groundLayerContext, objectLayerContext, uiLayerContext, x, y)) {
                                continue;
                            }
                        }
                    }
                    break;
            }

            uiLayerContext.beginPath();
            uiLayerContext.strokeStyle = "red";
            uiLayerContext.lineWidth = 10;

            if (edgeScrollingEnabled) {
                uiLayerContext.rect(
                    uiLayerContext.lineWidth / 2,
                    uiLayerContext.lineWidth / 2,
                    groundLayerCanvas.width - (uiLayerContext.lineWidth),
                    groundLayerCanvas.height - (uiLayerContext.lineWidth));
                uiLayerContext.stroke();
            }

            uiLayerContext.beginPath();
            uiLayerContext.lineWidth = 1;
            uiLayerContext.moveTo(window.innerWidth / 2, 0);
            uiLayerContext.lineTo(window.innerWidth / 2, window.innerHeight);
            uiLayerContext.stroke();

            uiLayerContext.moveTo(0, window.innerHeight / 2);
            uiLayerContext.lineTo(window.innerWidth, window.innerHeight / 2);
            uiLayerContext.stroke();
        }

        function render(groundLayerContext, objectLayerContext, uiLayerContext, x, y) {
            var absPosition = translateXY(x, y);
            if (absPosition.x < -tileWidth
                || absPosition.y < -tileHeight
                || absPosition.x > groundLayerCanvas.width + tileWidth
                || absPosition.y > groundLayerCanvas.height + (tileHeight * 2)) {
                return false;
            }

            var tile = tileDefinitions.default;
            if (groundLayer[y] && groundLayer[y][x]) {
                tile = groundLayer[y][x];
            }
            var multiplierX = tileWidth / tile.tileWidth;
            var multiplierY = tileHeight / tile.tileHeight;
            if (tile.isAnimated) {
                tile = tile.current;
            }

            var yOffset = 0;
            if (tile.yOffsetDirection > 0) {
                yOffset = ((tile.sourceHeight * multiplierY) - tileHeight);
            }

            groundLayerContext.drawImage(
                tiles,
                tile.sourceX,
                tile.sourceY,
                tile.sourceWidth,
                tile.sourceHeight,
                absPosition.x - (tileWidth / 2),
                absPosition.y - (tileHeight / 2) - yOffset,
                tile.sourceWidth * multiplierX,
                tile.sourceHeight * multiplierY);

            if (objectLayer[y] && objectLayer[y][x]) {
                var object = objectLayer[y][x];
                if (object instanceof Array) {
                    object = object[rotation];
                }

                var multiplierX = tileWidth / object.tileWidth;
                var multiplierY = tileHeight / object.tileHeight;
                objectLayerContext.drawImage(
                    blocks,
                    object.sourceX,
                    object.sourceY,
                    object.sourceWidth,
                    object.sourceHeight,
                    absPosition.x - (tileWidth / 2),
                    absPosition.y - (tileHeight / 2) - ((object.sourceHeight * multiplierY) - tileHeight),
                    object.sourceWidth * multiplierX,
                    object.sourceHeight * multiplierY);
            }

            if (posLabelsEnabled) {
                var debugText = x + "," + y + " (" + Math.round(absPosition.x) + "," + Math.round(absPosition.y) + ")";
                var color = "white";
                if (y === 0) {
                    color = "red";
                } else if (x === 0) {
                    color = "green";
                }
                uiLayerContext.fillStyle = color;
                uiLayerContext.textBaseline = "middle";
                var size = uiLayerContext.measureText(debugText);
                uiLayerContext.fillText(debugText, absPosition.x - (size.width / 2), absPosition.y);
            }

            uiLayerContext.clearRect(0, 0, 200, 200);
            uiLayerContext.fillStyle = "white";
            uiLayerContext.fillText("rotation: "+ rotation, 20, 100);
            uiLayerContext.fillText("cameraX: "+ cameraX, 20, 115);
            uiLayerContext.fillText("cameraY: "+ cameraY, 20, 130);

            return true;
        }
    </script>
</head>
<body>
    <canvas id="groundLayerCanvas" width="800" height="600"></canvas>
    <canvas id="objectLayerCanvas" width="800" height="600"></canvas>
    <canvas id="uiLayerCanvas" width="800" height="600"></canvas>
    <button id="toggleEdgeScrollingEnabled">Toggle edge scrolling</button>
    <button id="togglePosLabelsEnabled">Toggle position labels</button>
</body>
</html>
